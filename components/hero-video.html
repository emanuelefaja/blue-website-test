{{- /* 
================================================================================
HERO VIDEO COMPONENT
================================================================================
Displays a full-width hero media element - supports videos, YouTube embeds, or images.
Videos have controls and optional mute/unmute button.

USAGE:
{{template "hero-video" dict "VideoUrl" "/path/to/video.mp4" "ShowUnmuteButton" true}}
{{template "hero-video" dict "ImageUrl" "/path/to/image.jpg" "ImageAlt" "Description"}}

EXAMPLE IMPLEMENTATIONS:

1. Basic local video (with browser controls):
{{template "hero-video" 
    dict 
        "VideoUrl" "/product/hero/blue-hero-video-fast.mp4"
}}

2. Local video with custom mute/unmute button:
{{template "hero-video" 
    dict 
        "VideoUrl" "/product/demo-video.mp4" 
        "ShowUnmuteButton" true
}}

3. Local video without any controls (completely autoplay):
{{template "hero-video" 
    dict 
        "VideoUrl" "/product/hero-video.mp4" 
        "HideControls" true
}}

4. YouTube video:
{{template "hero-video" 
    dict 
        "Youtube": "https://www.youtube.com/watch?v=lbFvQ-0ENTY"
}}

5. Static image:
{{template "hero-video" 
    dict 
        "ImageUrl" "/product/hero-image.jpg"
        "ImageAlt" "Product screenshot"
}}

DATA STRUCTURE:
{
    "VideoUrl": "/path/to/video.mp4",     // Local video file path (optional)
    "Youtube": "https://youtube.com/...", // YouTube URL (optional)
    "ImageUrl": "/path/to/image.jpg",     // Image file path (optional)
    "ImageAlt": "Alt text",               // Image alt text (optional, used with ImageUrl)
    "ShowUnmuteButton": true,             // Show custom mute button (optional, local videos only)
    "HideControls": true,                 // Hide browser controls (optional, local videos only, default: false)
    "MarginBottom": "mb-20"               // Bottom margin (optional, default: "mb-16")
}

FEATURES:
- Full-width responsive media display
- Supports local video files, YouTube videos, and static images
- Videos: Autoplay with muted audio by default
- Videos: Continuous loop playback
- Videos: Browser native controls (optional, can be hidden with HideControls)
- Videos: Optional custom mute/unmute button overlay (local videos only)
- AlpineJS-powered mute toggle for videos
- Rounded corners with border
- YouTube embed with responsive design
- Images: Full-width responsive with aspect ratio preservation

LAYOUT:
- Width: Full container width
- Bottom margin: Customizable (default: 16 units / 4rem)
- Border radius: 2xl (1rem)
- Border: Gray-200
- YouTube: 16:9 aspect ratio maintained

CUSTOM MUTE BUTTON (Local videos only):
- Position: Top-right corner (4 units from edges)
- Background: Green when muted, black when unmuted
- Icons: Speaker with X (muted), speaker with waves (unmuted)
- Text label changes: "Unmute" / "Mute"
- Smooth transitions and hover effects

LOCAL VIDEO ATTRIBUTES:
- autoplay: Starts playing immediately
- muted: Required for autoplay to work
- loop: Continuous playback
- playsinline: Prevents fullscreen on mobile
- controls: Shows browser playback controls (optional, controlled by HideControls)

YOUTUBE EMBED:
- Responsive iframe with 16:9 aspect ratio
- YouTube player controls enabled
- No autoplay (YouTube policy)
- Maintains responsive design

USE CASES:
- Homepage hero sections
- Product demonstrations
- Background videos (use HideControls: true)
- Feature showcases
- Landing page headers
- Static hero images
- Product screenshots
*/ -}}
{{define "hero-video"}}
<!-- Hero Video Component -->
<section class="w-full {{if .MarginBottom}}{{.MarginBottom}}{{else}}mb-16{{end}} relative" 
         {{if and .ShowUnmuteButton .VideoUrl}}
         x-data="{ 
             isMuted: true,
             toggleMute() {
                 const video = this.$refs.video;
                 this.isMuted = !this.isMuted;
                 video.muted = this.isMuted;
             }
         }"
         {{end}}>
    
    {{if .ImageUrl}}
    <!-- Static Image -->
    <img 
        src="{{.ImageUrl}}"
        {{if .ImageAlt}}alt="{{.ImageAlt}}"{{else}}alt=""{{end}}
        class="w-full h-auto object-cover rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700"
    >
    {{else if .Youtube}}
    <!-- YouTube Video -->
    <div class="relative w-full rounded-2xl border border-gray-200 overflow-hidden" style="padding-bottom: 56.25%;">
        <iframe 
            class="absolute top-0 left-0 w-full h-full"
            src="{{.Youtube}}" 
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            allowfullscreen>
        </iframe>
    </div>
    {{else if .VideoUrl}}
    <!-- Local Video -->
    <video 
        {{if .ShowUnmuteButton}}x-ref="video"{{end}}
        class="w-full h-auto object-cover rounded-2xl border border-gray-200" 
        autoplay 
        muted 
        loop 
        playsinline
        {{if not .HideControls}}controls{{end}}
    >
        <source src="{{.VideoUrl}}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    
    {{if .ShowUnmuteButton}}
    <!-- Custom Unmute Button -->
    <button 
        @click="toggleMute()"
        :class="isMuted ? 'bg-green-500 bg-opacity-80' : 'bg-black bg-opacity-50'"
        class="absolute top-4 right-4 hover:bg-opacity-90 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 z-10"
    >
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <!-- Muted icon -->
            <path x-show="isMuted" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.82L4.73 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.73l3.653-3.82a1 1 0 011.617.82zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z"/>
            <!-- Unmuted icon -->
            <path x-show="!isMuted" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.82L4.73 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.73l3.653-3.82a1 1 0 011.617.82zM12.146 5.146a1 1 0 011.414 0c2.39 2.391 2.39 6.268 0 8.658a1 1 0 01-1.414-1.414c1.598-1.598 1.598-4.232 0-5.83a1 1 0 010-1.414z"/>
        </svg>
        <span x-text="isMuted ? 'Unmute' : 'Mute'"></span>
    </button>
    {{end}}
    {{end}}
</section>

{{end}}